<div class="container px-4 py-8 mx-auto">
    {% if section.settings.headline != blank %}
      <h2 class="mb-6 text-2xl text-center">{{ section.settings.headline }}</h2>
    {% endif %}
  
    <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
      {% for block in section.blocks %}
        {% assign collection = collections[block.settings.collection] %}
        {% assign default_image = collection.image | image_url: '480x480' %}
        {% assign image = block.settings.image | default: default_image %}
        {% assign heading = block.settings.heading | default: collection.title %}
        {% assign button_link = block.settings.button_link | default: collection.url %}
        
        <div class="p-4 bg-white border border-gray-200">
          <a href="{{ button_link }}">
            <img class="w-full h-auto mb-4" src="{{ image | asset_url }}" loading="lazy" alt="{{ heading }}">
          </a>
          <div>
            <div class="h2">{{ heading }}</div>
            {% if block.settings.button_text %}
              <a href="{{ button_link }}" class="inline-block bg-{{ section.settings.button_background_color }} text-{{ section.settings.button_text_color }} py-2 px-4 rounded">{{ block.settings.button_text }}</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  

{% schema %}
{
  "name": "Collection List",
  "settings": [
    {
      "type": "text",
      "id": "headline",
      "label": "Headline Text",
      "default": "Featured Collections"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#FFFFFF"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection Block",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Displayed Collection"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "View All"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Default Collection List",
      "category": "Collection",
      "settings": {
        "headline": "Our Collections"
      },
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ],
  "max_blocks": 3
}
{% endschema %}